#!/bin/bash
SCRP_DIR=$(dirname "${BASH_SOURCE[0]}")
prefix="$HOME/.local";
comprefix="${prefix}/share/bash-completion/completions"
name=sshmount
maintainer=fuseteam

download_sshmount(){
	echo "downloading latest version"
	wget -q https://github.com/${maintainer}/${name}/releases/latest/download/${name}.zip -O $HOME/Downloads/${name}.zip
}

unzip_sshmount() {
	echo "unpacking..."
	unzip -q $HOME/Downloads/${name}.zip -d $HOME/${name}
}

install_sshmount(){
	mkdir -p ${prefix}/bin
	mkdir -p ${prefix}/lib
	mkdir -p ${comprefix}
	chmod 755 ${SCRP_DIR}/bin/*
	cp -f $SCRP_DIR/bin/* ${prefix}/bin
	cp -f $SCRP_DIR/lib/* ${prefix}/lib
	cp -rf $SCRP_DIR/share/* ${prefix}/share
}

remove_sshmount(){
	rm -f ${prefix}/bin/sshmount\
	      ${prefix}/lib/sshmountlib\
	      ${comprefix}/sshmount
}

if [ "$1" = "setup" ]; then
	install_${name};
	rm -r $HOME/${name};
	rm -r $HOME/Downloads/${name}.zip;
fi
